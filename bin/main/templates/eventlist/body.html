<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
      layout:decorate="~{common/layout}">

<head>
</head>

<body>
  <div layout:fragment="content">
	  <div class="container">
			<div class="row">
        <div class="col s12">
    			<h4><i class="material-icons small">event</i>イベント一覧</h4>
        </div>
				<div class="col s12 m3">
		      <div class="card cyan lighten-5">
		        <div class="card-content">
	            <h6>開催日（以降）</h6>
	            <div class="input-field white">
	              <input id="startDate" class="datepicker" type="text">
	            </div>
              <div class="center-align"><i class="material-icons">add</i></div>
	            <h6>都道府県</h6>
              <div class="input-field">
	              <select id="prefecture" class="browser-default" v-model="prefectureCode" v-on:change="getLines">
	                <option v-for="p in prefectures" v-bind:value="p.code">{{ p.name }}</option>
	              </select>
              </div>
              <div class="center-align"><i class="material-icons">add</i></div>
              <h6>最寄り駅</h6>
              <label for="prefecture">路線</label>
              <div class="input-field">
                <select id="line" class="browser-default" v-model="lineCode" v-on:change="getStations" v-bind:disabled="prefectureCode == ''">
                  <option value="" disabled selected>(未設定)</option>                
                  <option v-for="line in lines" v-bind:value="line.code">{{ line.name }}</option>
                </select>
              </div>
              <label for="station">駅</label>
              <div class="input-field">
	              <select id="station" class="browser-default" v-model="stationCode" v-bind:disabled="lineCode == ''">
                  <option value="" disabled selected>(未設定)</option>
	                <option v-for="s in stations" v-bind:value="s.code">{{ s.name }}</option>
	              </select>
              </div>
		          <div class="center-align">
		            <button class="btn waves-effect waves-light center" v-on:click.prevent="getEvents">検索する<i class="material-icons right">search</i></button>
		          </div>
		        </div>
		      </div>
				</div>
				
	      <div id="eventlist" class="col s12 m9">
		      <div class="row" v-if="!events.length">
		        <div class="col s12">
              <div class="progress" v-if="isProcess">
                <div class="indeterminate"></div>
              </div>
		          <div class="card-panel red lighten-5">
		            <span>イベント情報はありません</span>
		          </div>
		        </div>
		      </div>
		      <div class="row">
		        <div class="col s12 m6" v-for="event in events">
              <div class="card sticky-action">
		            <div class="card-content">
		              <span class="card-title activator">{{ event.name }}<i class="material-icons right">more_vert</i></span>
		              <div v-for="p in prefectures">
		                <p v-if="p.code == event.prefectureCode">都道府県：{{ p.name }}</p>
		              </div>
	                <p>最寄り駅：{{ event.stationName }}</p>
                  <p>建物 / 会場：{{ event.place }}</p>
                  <hr>
	                <p>開始：{{ event.startDateTime }}</p>
	                <p>終了：{{ event.endDateTime }}</p>
                </div>
								<div class="card-reveal light-blue lighten-1 white-text">
									<span class="card-title">{{ event.name }}<i class="material-icons right">close</i></span>
									<span class="textarea">{{ event.content }}</span>
								</div>
		          </div>
		        </div>
		      </div>
	      </div>
			</div>
	  </div>
  </div>

  <div layout:fragment="javascript">
    <script th:src="@{/js/eventlist/script.js}"></script> 
  </div>

</body>

</html>